# Window Rules Configuration
# See https://wiki.hypr.land/Configuring/Window-Rules/ for more
# See https://wiki.hypr.land/Configuring/Workspace-Rules/ for workspace rules

# Suppress maximize requests from all apps
windowrule {
    name = suppress-maximize-events
    match:class = .*

    suppress_event = maximize
}

# Fix some dragging issues with XWayland
windowrule {
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false

    no_focus = true
}

# Hyprland-run windowrule
windowrule {
    name = move-hyprland-run
    match:class = hyprland-run

    move = 20 monitor_h-120
    float = yes
}

# Float common dialog/settings apps
windowrule {
    name = float-settings-apps
    match:class = ^(pavucontrol|nm-connection-editor|blueman-manager|gnome-disks|baobab|eog|file-roller|org.gnome.Calculator|gnome-calculator)$

    float = true
    center = true
}

# Float file dialogs (Open, Save As, etc.)
windowrule {
    name = float-file-dialogs
    match:title = ^(Open File|Save As|Save File|Open Folder|Select|Choose|Browse|File Upload|Export|Import).*$

    float = true
    center = true
}

# Screen sharing picker - float and pin
windowrule {
    name = screen-share-picker
    match:title = ^(.*)(Choose|Select|Share)(.*)$
    match:class = ^(xdg-desktop-portal-gtk|xdg-desktop-portal-hyprland|xdg-desktop-portal)$

    float = true
    pin = true
    center = true
}

# Screen share indicator windows
windowrule {
    name = screen-share-indicator
    match:title = ^(.*)(is sharing (your screen|a window))(.*)$

    float = true
    pin = true
    move = 50% 10
}

# Glassmorphism - Window opacity rules
windowrule {
    name = glassmorphism-all-apps
    match:class = .*

    opacity = 0.88 0.82
}

# File managers - slightly more transparent
windowrule {
    name = glassmorphism-file-managers
    match:class = ^(thunar|nautilus|nemo|dolphin|pcmanfm)$

    opacity = 0.85 0.78
}

# Terminals already have their own transparency via config
windowrule {
    name = terminals-native-transparency
    match:class = ^(kitty|alacritty|foot|wezterm)$

    opacity = 1.0 1.0
}

# Code editors - keep readable
windowrule {
    name = editors-transparency
    match:class = ^(code|Code|codium|vscodium|sublime_text|gedit)$

    opacity = 0.92 0.88
}

# Browsers - keep more opaque for readability
windowrule {
    name = browsers-transparency
    match:class = ^(firefox|chromium|brave|google-chrome|vivaldi)$

    opacity = 0.95 0.90
}

# Media apps - keep opaque for video
windowrule {
    name = media-opaque
    match:class = ^(mpv|vlc|celluloid|totem)$

    opacity = 1.0 1.0
}

# Image viewers/editors - keep opaque for color accuracy
windowrule {
    name = image-apps-opaque
    match:class = ^(gimp|inkscape|krita|eog|loupe|gwenview|imv)$

    opacity = 1.0 1.0
}

# Games - keep opaque
windowrule {
    name = games-opaque
    match:class = ^(steam|Steam|lutris|heroic)$
    match:fullscreen = true

    opacity = 1.0 1.0
}

# Picture-in-Picture windows
windowrule {
    name = pip-windows
    match:title = ^(Picture-in-Picture|Picture in picture)$

    float = true
    pin = true
}
